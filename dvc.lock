schema: '2.0'
stages:
  resample data:
    cmd: python src/Resampling.py results/after_resampling/NFvsF_after_undersampling.json
      results/after_resampling/Distrib_after_undersampling.png results/after_resampling/Corr_matrices_comp.png
    deps:
    - path: creditcard.csv
      md5: e90efcb83d69faf99fcab8b0255024de
      size: 150828752
    - path: src/Resampling.py
      md5: 5a5773e8a1e6a25ff7aaa87b74564ca9
      size: 4242
    params:
      params.yaml:
        resample_data.param: 1
        resample_data.percentage: 1
    outs:
    - path: balanced-data.csv
      md5: 7c326a9ada50081490b2540d1154e60d
      size: 534065
    - path: results/after_resampling/Corr_matrices_comp.png
      md5: 3e1943ecdf1600331bb9d349fadc7a23
      size: 169900
    - path: results/after_resampling/Distrib_after_undersampling.png
      md5: 5284a6185952e971a1ebd32c75dbfb7b
      size: 44701
    - path: results/after_resampling/NFvsF_after_undersampling.json
      md5: fcbc4e2625bbeecefd953b254e05f90b
      size: 35
  splitting data:
    cmd: python src/prepare.py
    deps:
    - path: balanced-data.csv
      md5: 7c326a9ada50081490b2540d1154e60d
      size: 534065
    - path: src/prepare.py
      md5: 01735dbbf6caae3a3af30913f097d741
      size: 957
    params:
      params.yaml:
        splitting_data.split-param: 0.2
    outs:
    - path: results/splited_data/test_features.csv
      md5: 82dd002b9639a8f6a34430d374d9aaaa
      size: 103857
    - path: results/splited_data/test_labels.csv
      md5: c91a57627ff599e4ba498619e2e9679f
      size: 598
    - path: results/splited_data/train_features.csv
      md5: 96e33c3194699f1bf207d759638033d8
      size: 414560
    - path: results/splited_data/train_labels.csv
      md5: 7fa795bb549abbb99192cbf537899e66
      size: 2368
  train model:
    cmd: python src/train.py results/finalvar.pkl results/logit.pkl results/model_summary.txt
    deps:
    - path: results/splited_data/train_features.csv
      md5: 96e33c3194699f1bf207d759638033d8
      size: 414560
    - path: results/splited_data/train_labels.csv
      md5: 7fa795bb549abbb99192cbf537899e66
      size: 2368
    - path: src/train.py
      md5: ec57876a6dba84dd48402cfd5847a02e
      size: 1669
    outs:
    - path: results/model_summary.txt
      md5: b5f3bb0b722c63e0e4cfa27352b54423
      size: 2053
  test model:
    cmd: python src/test.py results/finalvar.pkl results/logit.pkl results/accuracy_ns.json
      results/confusionmatrix_ns.png results/classification_report_ns.txt results/accuracy_wd.json
      results/confusionmatrix_wd.png results/classification_report_wd.txt
    deps:
    - path: creditcard.csv
      md5: e90efcb83d69faf99fcab8b0255024de
      size: 150828752
    - path: results/finalvar.pkl
      md5: 5c6e768401384131a7be3a3fd352cb01
      size: 70
    - path: results/logit.pkl
      md5: a821f7fe826df160b846a15bea84940c
      size: 149983
    - path: results/splited_data/test_features.csv
      md5: 82dd002b9639a8f6a34430d374d9aaaa
      size: 103857
    - path: results/splited_data/test_labels.csv
      md5: c91a57627ff599e4ba498619e2e9679f
      size: 598
    - path: src/test.py
      md5: b3899b96da96f37182da868c63e37094
      size: 2859
    outs:
    - path: results/accuracy_ns.json
      md5: fdf753eaed97506b69eb761ac0a70190
      size: 37
    - path: results/accuracy_wd.json
      md5: 1e4ef98d8748fc2d0aea9a818e497559
      size: 38
    - path: results/classification_report_ns.txt
      md5: a648f689c10f2c8e95519fd89693c8fc
      size: 334
    - path: results/classification_report_wd.txt
      md5: 8f3cf7b58d076d3287b0a4fd65ce491d
      size: 334
    - path: results/confusionmatrix_ns.png
      md5: 4cf221b917dc594118e321296cf4325f
      size: 14395
    - path: results/confusionmatrix_wd.png
      md5: 3d4d5768e3b76ca6c15d71a227d53955
      size: 28528
  understand data:
    cmd: python src/data_understanding.py results/before_resampling/NFvsF_before_undersampling.json
      results/before_resampling/Count_before_undersampling.png results/before_resampling/distrib_before_undersampling.png
    deps:
    - path: creditcard.csv
      md5: e90efcb83d69faf99fcab8b0255024de
      size: 150828752
    - path: src/data_understanding.py
      md5: 77cffc34a75f42bb9ceaef05f5e57026
      size: 1897
    outs:
    - path: results/before_resampling/Count_before_undersampling.png
      md5: 34238b3ce21d197cb7e71983b8511699
      size: 23368
    - path: results/before_resampling/NFvsF_before_undersampling.json
      md5: 640cfb76f2deb8e77b2a4b76f1e90eff
      size: 38
    - path: results/before_resampling/distrib_before_undersampling.png
      md5: ac339318b7ee4307b07c396a598d09de
      size: 34123
