stages : 

  understand data :   
   cmd : python src/data_understanding.py 
   deps : 
    - src/data_understanding.py
    - creditcard.csv
   outs: 
    - results/before_resampling/Count_before_undersampling.png
    - results/before_resampling/distrib_before_undersampling.png
   metrics:
    - results/before_resampling/NFvsF_before_undersampling.json:
        cache: false

  
  resample data : 
   cmd: python src/Resampling.py 
   deps :  
    - src/Resampling.py
    - creditcard.csv
   params:
    - resample_data.param 
    - resample_data.percentage
   outs : 
    - balanced-data.csv  
   metrics:
    - results/after_resampling/NFvsF_after_undersampling.json:
        cache: false
   

  
  
  splitting data : 
   cmd : python src/prepare.py
   deps : 
    - src/prepare.py
    - balanced-data.csv
   params:
    - splitting_data.split-param
   outs : 
    - results/splited_data/train_features.csv
    - results/splited_data/test_features.csv
    - results/splited_data/train_labels.csv
    - results/splited_data/test_labels.csv  
   
   
   
   
   
  train model :
   cmd : python src/train.py 
   deps : 
    - src/train.py
    - results/splited_data/train_features.csv
    - results/splited_data/train_labels.csv
   outs : 
    - results/finalvar.pkl
    - results/logit.pkl  
   metrics:
    - results/model_summary.txt:
        cache : false
        
        
        
        
           
  test model : 
   cmd : python src/test.py 
   deps: 
    - results/finalvar.pkl
    - results/logit.pkl
    - src/test.py
    - results/splited_data/test_features.csv
    - results/splited_data/test_labels.csv
    - creditcard.csv
   outs:
    - results/confusion-matrix(newsample).png
    - results/confusion-matrix(whole_data-set).png
   metrics :
    - results/accuracy(newsample).json:
        cache: false
    - results/accuracy(whole_data-set).json:
        cache: false
    - results/OnNewSample_classification_report.txt :
        cache: false
    - results/Whole_data-set_classification_report.txt:
        cache: false

   
